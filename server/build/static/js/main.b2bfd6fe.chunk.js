(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{147:function(e,t,n){e.exports=n(193)},152:function(e,t,n){},153:function(e,t,n){},190:function(e,t){},193:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(152),n(153),n(29)),s=n(267),l=n(245),u=n(238),m=n(260),d=n(244),p=n(264),f=n(76),g=n.n(f),E=n(46),h=n(234),v=n(236),b=n(13),S=n(239),y=n(240),O=n(246),x=n(265),C=n(242),_=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function j(e){var t=e.login,n=(e.loggedIn,e.error),o=e.clear,c=_(),f=Object(a.useRef)(),h=Object(a.useRef)(),j=Object(b.g)(),R=Object(a.useState)(!1),I=Object(i.a)(R,2),N=I[0],U=I[1];return Object(a.useEffect)((function(){U(Boolean(n))}),[n]),r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(u.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement(s.a,{className:c.avatar},r.a.createElement(g.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("div",{className:c.form,noValidate:!0},r.a.createElement(S.a,{item:!0,xs:12,style:{height:"100%"}},r.a.createElement(y.a,{in:N,onExited:o},r.a.createElement(x.a,{severity:"error",onClose:function(){return U(!1)}},r.a.createElement(C.a,null,"Error"),n))),r.a.createElement(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){f.current=e.target.value}}),r.a.createElement(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){h.current=e.target.value}}),r.a.createElement(d.a,{control:r.a.createElement(p.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,onClick:function(){t(f.current,h.current)}},"Sign In"),r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:!0}),r.a.createElement(S.a,{item:!0},r.a.createElement(O.a,{onClick:function(){return j.push("/signup")},style:{cursor:"pointer"}},"Don't have an account? Sign Up"))))))}var R=n(128),I=n(258),N=n(259),U=n(28),w=n(22),A=n.n(w),T=n(54),k=n(34),M=n(61),P=n(52),L=n(62),G=function(){var e=Object(k.a)(A.a.mark((function e(t,n){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:Object(T.a)({},Object(L.authHeader)())},e.next=3,fetch(Object(M.jsonToQueryParams)("/api/login",{username:t,password:n}),a).then(P.handleResponse).then((function(e){var t;return localStorage.setItem("token",null===(t=e.data)||void 0===t?void 0:t.token),e.data}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(k.a)(A.a.mark((function e(t){var n,a,r,o,c,i,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firstName,a=t.lastName,r=t.username,o=t.email,c=t.password,i={method:"POST",body:JSON.stringify({firstName:n,lastName:a,username:r,email:o,password:c}),headers:{"Content-Type":"application/json"}},console.log("/api/register"),e.next=5,fetch("/api/register",i).then(P.handleResponse).then((function(e){return e.message}));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=n(4),B=n(254),F=n(255),H=n(194),K=n(250),Q=n(241),z=n(124),J=n.n(z),V=n(125),Y=n.n(V),q=n(266),$=n(256),X=n(243),Z=n(249),ee=n(253),te=n(252),ne=n(62).authHeader,ae=n(52).handleResponse,re=n(61).jsonToQueryParams,oe={getMyRooms:function(){var e=Object(k.a)(A.a.mark((function e(t){var n,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:Object(T.a)({},ne())},e.next=3,fetch(re("/api/room",{members:t}),n).then(ae).then((function(e){return e.data}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=function(e){return function(t){t({type:"GET_MY_ROOMS_REQUEST"}),oe.getMyRooms(e).then((function(e){return t({type:"GET_MY_ROOMS_SUCCESS",payload:e})}),(function(e){return t(function(e){return{type:"GET_MY_ROOMS_FAILURE",payload:e}}(e))}))}},ie=n(251),se=n(262),le=n(247),ue=n(268),me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(a.useRef)(),r=Object(a.useCallback)((function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];clearTimeout(n.current),n.current=setTimeout((function(){return e.apply(void 0,r)}),t)}),[e,t,n]);return r},de=n(16),pe=n(248),fe=Object(h.a)((function(e){return{container:{backgroundColor:e.palette.grey[100],height:"100%",width:"400px"},searchBar:{margin:"50px 10px"},chipContainer:{padding:"20px",display:"flex",flexWrap:"wrap"},chip:{margin:"10px"}}})),ge=function(e){var t=e.open,n=e.onOpen,o=e.onClose,c=e.searchUsers,s=e.users,l=fe(),u=Object(a.useState)(Object(de.a)()),d=Object(i.a)(u,2),p=d[0],f=d[1],g=me((function(e){c(e)}),300),E=function(e){var t=e.target.value;g(t)},h=function(e){var t=p.findIndex((function(t){return t.get("_id")===e}));f((function(e){return e.splice(t,1)}))};return r.a.createElement(se.a,{open:t,onOpen:n,onClose:function(){o(p),f(Object(de.a)())},anchor:"left"},r.a.createElement("div",{className:l.container},r.a.createElement("div",{className:l.searchBar},r.a.createElement(q.a,{onChange:function(e,t){t&&f((function(e){return e.push(Object(de.d)(t))}))},getOptionLabel:function(e){return e.username},getOptionSelected:function(e){return e.username},style:{width:"90%",marginLeft:"20px"},options:s.get("data").filter((function(e){return!p.includes(e)})).toJS(),renderInput:function(e){return r.a.createElement(m.a,Object.assign({fullWidth:!0,placeholder:"Search by email address, phone number, or user UID",onChange:E,InputProps:{disableUnderline:!0}},e))}})),r.a.createElement(le.a,null),r.a.createElement("div",{className:l.chipContainer},p.map((function(e){var t,n,a;return r.a.createElement(ue.a,{key:e.get("_id"),icon:r.a.createElement(pe.a,null),label:(null!==(t=null!==(n=e.get("firstName"))&&void 0!==n?n:e.get("username"))&&void 0!==t?t:"")+" "+(null!==(a=e.get("lastName"))&&void 0!==a?a:""),onDelete:h,className:l.chip})})))))},Ee=Object(h.a)((function(e){return{root:{width:"99%",backgroundColor:e.palette.background.paper},inline:{display:"inline"},listItem:{width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center"},listItemActive:{backgroundColor:e.palette.primary.dark},listItemLastMessage:{color:e.palette.text.disabled}}}));function he(e){var t=e.rooms,n=(e.active,e.setActive,e.users),o=e.searchUsers,c=e.getMyRooms,u=Object(a.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Ee(),g=Object(U.c)(),h=Object(U.d)((function(e){return e.rooms.get("currentActive")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{open:d,onOpen:function(){return p(!0)},onClose:function(e){p(!1),(null===e||void 0===e?void 0:e.size)>0&&c(e.map((function(e){return e.get("username")})).join(","))},searchUsers:o,users:n}),r.a.createElement(X.a,{className:f.root},0===t.size&&r.a.createElement(Z.a,{alignItems:"flex-start"},r.a.createElement(E.a,{color:"textSecondary",align:"center"},"No users for this project yet")),r.a.createElement(Z.a,{alignItems:"flex-start"},r.a.createElement(K.a,{title:"Add user",placement:"right"},r.a.createElement(Q.a,{onClick:function(){return p((function(e){return!e}))}},r.a.createElement(ie.a,null)))),t.map((function(e,t){var n=e.get("messages").reverse().toJS()[0],a=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a._id===t)return a}}(e.get("members").toJS(),null===n||void 0===n?void 0:n.sender);return r.a.createElement("div",{key:e.get("_id")},r.a.createElement(Z.a,{alignItems:"flex-start"},r.a.createElement(l.a,{variant:"contained",color:h===t?"primary":"default",className:f.listItem,onClick:function(){return g({type:"SELECT_ACTIVE_ROOM",payload:t})}},r.a.createElement(te.a,{style:{marginTop:0}},r.a.createElement(s.a,{alt:e.getIn(["members",0,"firstName"]),src:"/static/images/avatar/2.jpg"})),r.a.createElement(ee.a,{primary:e.getIn(["members"]).map((function(e){return e.get("firstName")})).toJS().join(" , "),style:{textAlign:"left"},primaryTypographyProps:{noWrap:!0},secondary:r.a.createElement(E.a,{color:"textPrimary",noWrap:!0},a&&(null===a||void 0===a?void 0:a.firstName)+" - ",r.a.createElement("span",{className:f.listItemLastMessage},null===n||void 0===n?void 0:n.data))}))))}))))}var ve=Object(D.a)((function(e){return{paper:{flex:1,maxWidth:768,overflow:"hidden",display:"flex",flexDirection:"column",height:"100vh",borderRadius:0},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)",borderRight:"1px solid rgba(0, 0, 0, 0.12)",flex:1},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{flex:22}}}))((function(e){var t=e.classes,n=(e.onAddUser,e.loading),o=e.rooms,c=e.refreshRooms,s=e.users,l=e.searchUsers,u=(e.fakeLoading,e.active),d=e.getMyRooms,p=Object(a.useState)(""),f=Object(i.a)(p,2),g=f[0],E=f[1],h=Object(de.c)(o.reduce((function(e,t){return e.concat(t.get("members").map((function(e){return e.get("username")})).toJS())}),[])).toJS(),v=function(e){E(e.target.value)};return r.a.createElement(H.a,{className:t.paper},r.a.createElement(B.a,{className:t.searchBar,position:"static",color:"default",elevation:0},r.a.createElement(F.a,null,r.a.createElement(S.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(S.a,{item:!0},r.a.createElement(J.a,{className:t.block,color:"inherit"})),r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(q.a,{id:"combo-box-demo",onChange:function(e,t){return E(t)},options:h,renderInput:function(e){return r.a.createElement(m.a,Object.assign({fullWidth:!0,placeholder:"Search by email address, phone number, or user UID",onChange:v,InputProps:{disableUnderline:!0,className:t.searchInput}},e))}})),r.a.createElement(S.a,{item:!0},r.a.createElement(K.a,{title:"Reload"},r.a.createElement(Q.a,{onClick:function(){return c()}},r.a.createElement(Y.a,{className:t.block,color:"inherit"}))))))),r.a.createElement("div",{style:{height:"4px"}},n&&r.a.createElement($.a,null)),r.a.createElement("div",{className:t.contentWrapper},r.a.createElement(he,{searchUsers:l,users:s,active:u,getMyRooms:d,rooms:o.filter((function(e){return!g||-1!==e.get("members").map((function(e){return e.get("username")})).toJS().join(" ").search(g)}))})))})),be={search:function(){var e=Object(k.a)(A.a.mark((function e(t){var n,a,r,o,c,i,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.search,a=t.page,r=void 0===a?0:a,o=t.limit,c=void 0===o?50:o,i={headers:Object(T.a)({},Object(L.authHeader)())},e.next=4,fetch(Object(M.jsonToQueryParams)("/api/users",{search:n,page:r,limit:c}),i).then(P.handleResponse).then((function(e){return e.data}));case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Se=n(261),ye=n(257),Oe=n(126),xe=n.n(Oe),Ce=function(e,t){return new Promise((function(n,a){var r=xe()("",t);r.on("connect",(function(){r.emit("auth",{token:e})})),r.on("authenticated",(function(){n(r)})),r.on("error",(function(e){a(e)}))}))},_e=function(e,t){e.removeAllListeners(),e.on("message",(function(e){t.dispatch({type:"SOCKET_MESSAGE_RECEIVED",payload:e})})),e.on("newRoom",(function(e){t.dispatch({type:"SOCKET_NEW_ROOM",payload:e}),t.dispatch(ce())}))},je=function(e){var t=null;return function(n){return function(a){return function(r){if("LOGIN_SUCCESS"===r.type&&Ce(r.payload.token,e).then((function(e){console.info("Socket connected"),t=e,_e(e,n)})).catch((function(e){console.error("Socket error - ",e),n.dispatch({type:"SOCKET_ERROR",payload:e})})),"SOCKET_SEND_MESSAGE"===r.type){var o=r.payload,c=o.room,i=o.message;c&&i&&t&&t.emit("message",{room:c,message:i})}return a(r)}}}},Re=Object(h.a)((function(e){return{paper:{backgroundColor:e.palette.background.paper,flex:2,display:"flex",flexDirection:"column",height:"100vh",justifyContent:"space-between"},headerContainer:{backgroundColor:e.palette.grey[100],padding:"18px",display:"flex",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},title:{fontSize:"20px"},MessageContainer:{padding:"20px",backgroundColor:e.palette.background.paper,flex:21,height:"100%",overflow:"hidden"},messageBox:{backgroundColor:e.palette.grey[100],height:"100%",overflow:"auto",paddingTop:"20px"},listItemText:{fontSize:"16px"},listItemSenderText:{fontSize:"14px"},messageItemPaper:{padding:"10px"},senderBox:{backgroundColor:e.palette.grey[100],padding:"20px",marginTop:"20px",display:"flex",flex:2,alignItems:"center",justifyContent:"center"},senderPaper:{backgroundColor:e.palette.grey[100]}}})),Ie=function(e){var t=e.user,n=Re();return r.a.createElement(B.a,{className:n.headerContainer,position:"static",color:"default",elevation:0},r.a.createElement(E.a,{component:"span",variant:"body2",className:n.title,color:"textPrimary"},null===t||void 0===t?void 0:t.map((function(e){return e.get("username")})).join(" , ")))},Ne=function(e){e.avatar;var t=e.text,n=e.sender,a=e.itsMe,o=Re();return r.a.createElement("div",{style:{display:"flex",flexDirection:a?"row-reverse":"row",alignItems:"flex-end",margin:"0 0 20px 0"}},r.a.createElement(s.a,{style:{marginRight:"20px",marginLeft:"20px"},src:"/empty/",alt:n.get("username")}),r.a.createElement("div",null,r.a.createElement(E.a,{color:"textSecondary",className:o.listItemSenderText,style:{textAlign:a?"right":"left"}},n.get("username")),r.a.createElement(H.a,{className:o.messageItemPaper},r.a.createElement(E.a,{className:o.listItemText,color:"textPrimary"},t))))},Ue=function(e){var t=e.data,n=e.myUser,o=e.getSender,c=Re(),i=Object(a.useRef)();return Object(a.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth"})}),[t.size]),r.a.createElement(Se.a,{className:c.MessageContainer},r.a.createElement(H.a,{className:c.messageBox},t.map((function(e){return r.a.createElement(Ne,{key:e.get("_id"),text:null===e||void 0===e?void 0:e.get("data"),sender:o(e.get("sender")),itsMe:n===e.get("sender")})})),r.a.createElement("div",{ref:i})))},we=function(e){var t=e.onSend,n=Re(),o=Object(a.useRef)();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(o.current.value),o.current.value=""}},r.a.createElement(Se.a,{className:n.senderBox},r.a.createElement(m.a,{style:{height:"100%",margin:0,justifyContent:"center",alignItems:"center"},rows:1,placeholder:"Type a message",fullWidth:!0,margin:"normal",inputRef:o}),r.a.createElement(Q.a,{"aria-label":"send",style:{width:"60px"},type:"submit"},r.a.createElement(ye.a,null))))},Ae={sendMessage:function(e){return{type:"SOCKET_SEND_MESSAGE",payload:e}}},Te=Object(U.b)((function(e){return{room:e.rooms.get("rooms").size>0?e.rooms.getIn(["rooms",e.rooms.get("currentActive")]):Object(de.b)({messages:Object(de.a)()}),myUserId:e.auth.getIn(["user","_id"])}}),Ae)((function(e){var t=e.room,n=e.myUserId,a=e.sendMessage,o=Re();return r.a.createElement(H.a,{className:o.paper},r.a.createElement(Ie,{user:t.get("members")}),r.a.createElement(Ue,{data:t.get("messages"),myUser:n,getSender:function(e){return t.getIn(["members",t.get("members").findIndex((function(t){return t.get("_id")===e}))])}}),r.a.createElement(we,{onSend:function(e){a({room:t.get("_id"),message:e})}}))})),ke={getMyRooms:ce,searchUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return function(a){a({type:"SEARCH_USERS_REQUEST"}),be.search({search:e,page:t,limit:n}).then((function(e){return a({type:"SEARCH_USERS_SUCCESS",payload:e})}),(function(e){return a(function(e){return{type:"SEARCH_USERS_FAILURE",payload:e}}(e))}))}},searchUsersFakeLoading:function(){return{type:"SEARCH_FAKE_LOADING"}}},Me=Object(U.b)((function(e){return{rooms:e.rooms,users:e.users}}),ke)(Object(D.a)((function(e){return{container:{backgroundColor:"red",flex:1,flexDirection:"row",display:"flex"},modal:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColo:"red"}}}))((function(e){var t=e.classes,n=e.rooms,o=e.users,c=e.getMyRooms,i=e.searchUsers,s=e.searchUsersFakeLoading;Object(a.useEffect)((function(){c()}),[c]);var l=n.get("loading"),u=o.get("loading"),m=n.get("rooms"),d=n.get("currentActive");return r.a.createElement("section",{className:t.container},r.a.createElement(ve,{refreshRooms:c,getMyRooms:c,loading:l||u,rooms:m,users:o,searchUsers:i,fakeLoading:s,activeRoom:d}),r.a.createElement(Te,null))}))),Pe=n(70);function Le(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(O.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var Ge=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),We=function(e){var t=e.signUp,n=e.error,o=e.message,c=(e.loading,e.clear),d=Ge(),p=Object(b.g)(),f=Object(a.useRef)(),h=Object(a.useRef)(),_=Object(a.useRef)(),j=Object(a.useRef)(),R=Object(a.useRef)(),I=Object(a.useState)(!1),N=Object(i.a)(I,2),U=N[0],w=N[1],A=Object(a.useState)(!1),T=Object(i.a)(A,2),k=T[0],M=T[1];return Object(a.useEffect)((function(){w(Boolean(n))}),[n]),Object(a.useEffect)((function(){M(Boolean(o)),Boolean(o)&&setTimeout((function(){return p.push("/login")}),2e3)}),[o]),r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(u.a,null),r.a.createElement("div",{className:d.paper},r.a.createElement(s.a,{className:d.avatar},r.a.createElement(g.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("div",{className:d.form,noValidate:!0},r.a.createElement(S.a,{container:!0,spacing:2},r.a.createElement(S.a,{item:!0,xs:12,style:{height:"100%"}},r.a.createElement(y.a,{in:U,onExited:c},r.a.createElement(x.a,{severity:"error",onClose:function(){return w(!1)}},r.a.createElement(C.a,null,"Error"),n)),r.a.createElement(y.a,{in:k},r.a.createElement(x.a,{severity:"success",onClose:function(){return M(!1)}},r.a.createElement(C.a,null,"Success"),o))),r.a.createElement(S.a,{item:!0,xs:12,sm:6},r.a.createElement(m.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",onChange:function(e){return f.current=e.target.value},autoFocus:!0})),r.a.createElement(S.a,{item:!0,xs:12,sm:6},r.a.createElement(m.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:function(e){return h.current=e.target.value}})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:function(e){return _.current=e.target.value}})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){return j.current=e.target.value}})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return R.current=e.target.value}}))),r.a.createElement(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:d.submit,onClick:function(){t({firstName:f.current,lastName:h.current,username:_.current,email:j.current,password:R.current})}},"Sign Up"),r.a.createElement(S.a,{container:!0,justify:"flex-end"},r.a.createElement(S.a,{item:!0},r.a.createElement(O.a,{onClick:function(){return p.push("/login")},style:{cursor:"pointer"},variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(Se.a,{mt:5},r.a.createElement(Le,null)))},De=Object(R.a)({palette:{secondary:{light:"#0066ff",main:"#0044ff",contrastText:"#ffcc00"},tonalOffset:.2}}),Be={login:function(e,t){return function(n){n({type:"LOGIN_REQUEST"}),G(e,t).then((function(e){return n({type:"LOGIN_SUCCESS",payload:e})}),(function(e){return n(function(e){return{type:"LOGIN_FAILURE",payload:e}}(e))}))}},signUp:function(e){var t=e.firstName,n=e.lastName,a=e.username,r=e.email,o=e.password;return function(e){e({type:"SIGNUP_REQUEST"}),W({firstName:t,lastName:n,username:a,email:r,password:o}).then((function(t){return e({type:"SIGNUP_SUCCESS",payload:t})}),(function(t){return e(function(e){return{type:"SIGNUP_FAILURE",payload:e}}(t))}))}},clear:function(){return{type:"CLEAR_AUTH_MESSAGES"}}},Fe=Object(U.b)((function(e){return{auth:e.auth}}),Be)((function(e){var t=e.auth,n=e.login,o=e.signUp,c=e.clear,i=t.get("loggedIn"),s=t.get("error"),l=t.get("loading"),u=t.get("message");return Object(a.useEffect)((function(){n()}),[n]),r.a.createElement(I.a,{theme:De},r.a.createElement(Pe.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/",exact:!0,render:function(e){var t=e.location;return i?r.a.createElement(Me,null):!1===i?r.a.createElement(b.a,{to:{pathname:"/login",state:{from:t}}}):r.a.createElement(v.a,{component:"main",style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(N.a,null))}}),r.a.createElement(b.b,{path:"/login",render:function(e){var t=e.location;return i?r.a.createElement(b.a,{to:{pathname:"/",state:{from:t}}}):r.a.createElement(j,{login:n,loggedIn:i,error:s,clear:c})},exact:!0}),r.a.createElement(b.b,{path:"/signup",exact:!0},r.a.createElement(We,{signUp:o,error:s,message:u,loading:l,clear:c})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=n(42),Ke=Object(de.b)({loggedIn:null,user:null,loading:!1,error:null,message:null}),Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_REQUEST":return e.set("loading",!0).set("message",null).set("error",null);case"LOGIN_SUCCESS":return e.withMutations((function(e){return e.set("loading",!1),e.set("loggedIn",!0),e.set("user",a),e}));case"LOGIN_FAILURE":return e.withMutations((function(e){return null!==e.get("loggedIn")&&e.set("error",String(a)),e.set("loading",!1),e.set("loggedIn",!1),e}));case"SIGNUP_REQUEST":return e.set("loading",!0).set("message",null).set("error",null);case"SIGNUP_SUCCESS":return e.set("loading",!1).set("message",a);case"SIGNUP_FAILURE":return e.set("loading",!1).set("error",String(a));case"CLEAR_AUTH_MESSAGES":return e.set("error",null).set("message",null);default:return e}},ze=Object(de.b)({message:null,error:null,loading:!1,rooms:[],currentActive:0}),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"GET_MY_ROOMS_REQUEST":return e.set("loading",!0);case"GET_MY_ROOMS_SUCCESS":return e.withMutations((function(e){return e.set("loading",!1),a instanceof Array&&e.set("rooms",Object(de.d)(a)),e}));case"GET_MY_ROOMS_FAILURE":return e.withMutations((function(e){return e.set("loading",!1),e.set("error",a),e}));case"SELECT_ACTIVE_ROOM":return e.set("currentActive",a);case"SOCKET_MESSAGE_RECEIVED":return e.updateIn(["rooms",e.get("rooms").findIndex((function(e){return e.get("_id")===a.room})),"messages"],(function(e){return e.push(Object(de.d)(a.data))}));default:return e}},Ve=Object(de.b)({error:null,message:null,loading:null,data:Object(de.a)([])}),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SEARCH_USERS_REQUEST":return e.set("loading",!0);case"SEARCH_USERS_SUCCESS":return e.withMutations((function(e){return e.set("loading",!1),e.set("data",Object(de.d)(a)),e.set("error",null),e}));case"SEARCH_USERS_FAILURE":return e.withMutations((function(e){return e.set("loading",!1),e.set("error",String(a)),e.set("data",Object(de.a)([])),e.set("message",null),e}));case"SEARCH_FAKE_LOADING":return e.set("loading",!0);case"CLEAR_USERS_MESSAGES":return e.set("error",null).set("message".null);default:return e}},qe=Object(He.c)({auth:Qe,rooms:Je,users:Ye}),$e=n(127),Xe=He.d,Ze=[];Ze.push($e.a),Ze.push(je());var et=Object(He.e)(qe,Xe(He.a.apply(void 0,Ze)));c.a.render(r.a.createElement(U.a,{store:et},r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),window.env=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LOGIN:"/api/login",REACT_APP_ROOM:"/api/room",REACT_APP_SIGN_UP:"/api/register",REACT_APP_SOCKET:"",REACT_APP_USERS:"/api/users"})},52:function(e,t,n){"use strict";n.r(t),n.d(t,"handleResponse",(function(){return c}));var a=n(22),r=n.n(a),o=n(34),c=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,t.status>=200&&t.status<=300&&"error"!==n.status){e.next=5;break}throw null!==(a=n.message)&&void 0!==a?a:t.statusText;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},61:function(e,t,n){"use strict";n.r(t),n.d(t,"jsonToQueryParams",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=new URL(e);for(var a in t)null!==t[a]&&void 0!==t[a]&&n.searchParams.append(a,t[a]);return n.toString()}catch(c){var r=new URLSearchParams;for(var o in t)null!==t[o]&&void 0!==t[o]&&r.append(o,t[o]);return e+"?"+r.toString()}}},62:function(e,t,n){"use strict";n.r(t),n.d(t,"authHeader",(function(){return a}));var a=function(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer "+e}:null}}},[[147,1,2]]]);
//# sourceMappingURL=main.b2bfd6fe.chunk.js.map